sanitize tridactyllocal tridactylsync
reset all

set csp clobber
fixamo_quiet

"set theme dark
set theme shydactyl

set hintuppercase false
set hintchars jfkdls;a
set yankto both
set editorcmd urxvt -e nvim

unbind p
unbind P
unbind O
keymap ; :
keymap : ;
bind j scrollline 1
bind k scrollline -1
bind H scrollpx -1
bind L scrollpx 1
bind h tabprev
bind l tabnext_gt
bind <c-h> tabmove -10
bind <c-l> tabmove +10
bind <c-o> back
bind <c-i> forward
bind --mode=insert <c-h> im_delete_backward_char
bind --mode=input <c-h> im_delete_backward_char
bind z0 zoom 195
bind co composite get_current_url| tabopen -c oct
bind cs composite get_current_url| tabopen -c sol
bind cn composite get_current_url| tabopen -c nic

bindurl todoist.com f hint -c a,input,button,textarea,select,div.ist_checkbox,#gear_holder,.menu_item>td,li.filter,.clickable,.richtext_editor
autocmd DocStart .* zoom 195
autocmd DocLoad .* zoom 195
autocmd TabEnter .* zoom 195
autocmd DocLoad moneyforward.com/users/two_step_verifications/new js document.getElementsByClassName('not-now')[0].click()
autocmd DocLoad inoreader.com js document.body.innerHTML += '<style>.inno_dialog[id*="wrapper"], .inno_dialog_modal_overlay[id*="modal_overlay"] { display: none; }</style>'; (function loop(){ const xs = document.querySelectorAll('.adb_right_link_passive > a'); if( xs.length ) xs[0].click(); else setTimeout(loop, 100); }());
autocmd DocLoad sp.nicovideo.jp js document.location.href = document.location.href.replace('sp.nicovideo.jp', 'www.nicovideo.jp');
command openPixiv js var pixiv={};pixiv.list=iter=>{iter.map=f=>Array.prototype.map.call(iter,f);iter.forEach=f=>Array.prototype.forEach.call(iter,f);iter.reduce=(f,zero)=>Array.prototype.reduce.call(f,zero);iter.filter=f=>Array.prototype.filter.call(f);iter.toArray=()=>iter.map(x=>x);return iter};pixiv.selector=elm=>{elm.first=q=>elm.querySelector(q);elm.select=q=>pixiv.list(elm.querySelectorAll(q));return elm};pixiv.first=q=>pixiv.selector(document).first(q);pixiv.select=q=>pixiv.selector(document).select(q);pixiv.openLinks=function(){const p=pixiv;const w=window;const uniq=xs=>Array.from(new Set(xs));uniq(p.select('a').map(a=>{w.console.log(a);const url=a.href;if(!url.match(/member_illust.*illust_id/))return;if(!a.querySelector('div'))return;const target=a.querySelector('path')?url.replace(/mode=medium/,'mode=manga'):url;return target})).forEach(url=>window.open(url,'_blank'))};pixiv.openLinks();
command mangaPixiv js var pixiv={};pixiv.list=iter=>{iter.map=f=>Array.prototype.map.call(iter,f);iter.forEach=f=>Array.prototype.forEach.call(iter,f);iter.reduce=(f,zero)=>Array.prototype.reduce.call(f,zero);iter.filter=f=>Array.prototype.filter.call(f);iter.toArray=()=>iter.map(x=>x);return iter};pixiv.selector=elm=>{elm.first=q=>elm.querySelector(q);elm.select=q=>pixiv.list(elm.querySelectorAll(q));return elm};pixiv.first=q=>pixiv.selector(document).first(q);pixiv.select=q=>pixiv.selector(document).select(q);pixiv.wait=function(f,callback){const rec=()=>{if(!f())setTimeout(rec,100);else callback()};rec()};pixiv.waitOverrideView=function(){const p=pixiv;const d=document;const w=window;const identifier=`override-pixivmanga`;if(!/mode=manga/.test(w.location.href))return;if(!d||!d.body)return;if(p.first(`div.${identifier}`))return;p.wait(function(){const btn=p.first('.toggle-thumbnail');if(!btn)return false;btn.click();return p.first('li.thumbnail-item img')},p.overrideView)};pixiv.overrideView=function(){const p=pixiv;const d=document;const w=window;const identifier=`override-pixivmanga`;const thumbs=p.select('li.thumbnail-item img').map(img=>img.src);const larges=p.select('img.image').map(img=>img.dataset.src);const breadcrumbs=p.first('ul.breadcrumbs');d.body.innerHTML=`<nav>${breadcrumbs.outerHTML}</nav><ul class="thumbnail-items">${thumbs.map((url,idx)=>`<li class="thumbnail-item"><a href="#large${idx}"><img src="${url}"/></a></li>`).join('')}</ul>${larges.map((url,idx)=>`<div class="large-container"id="large${idx}"><a href="${idx == larges.length - 1? '#large0': `#large${idx+1}`}"><img src="${url}"/></a></div>`).join('\n')}<div class="${identifier}"/><style>.large-container{width:100%;height:100vh;text-align:center}.large-container img{width:auto;height:auto;max-width:95%;max-height:95%}</style>`};pixiv.waitOverrideView();
autocmd DocLoad pixiv.net js var pixiv={};pixiv.list=iter=>{iter.map=f=>Array.prototype.map.call(iter,f);iter.forEach=f=>Array.prototype.forEach.call(iter,f);iter.reduce=(f,zero)=>Array.prototype.reduce.call(f,zero);iter.filter=f=>Array.prototype.filter.call(f);iter.toArray=()=>iter.map(x=>x);return iter};pixiv.selector=elm=>{elm.first=q=>elm.querySelector(q);elm.select=q=>pixiv.list(elm.querySelectorAll(q));return elm};pixiv.first=q=>pixiv.selector(document).first(q);pixiv.select=q=>pixiv.selector(document).select(q);pixiv.wait=function(f,callback){const rec=()=>{if(!f())setTimeout(rec,100);else callback()};rec()};pixiv.waitOverrideView=function(){const p=pixiv;const d=document;const w=window;const identifier=`override-pixivmanga`;if(!/mode=manga/.test(w.location.href))return;if(!d||!d.body)return;if(p.first(`div.${identifier}`))return;p.wait(function(){const btn=p.first('.toggle-thumbnail');if(!btn)return false;btn.click();return p.first('li.thumbnail-item img')},p.overrideView)};pixiv.overrideView=function(){const p=pixiv;const d=document;const w=window;const identifier=`override-pixivmanga`;const thumbs=p.select('li.thumbnail-item img').map(img=>img.src);const larges=p.select('img.image').map(img=>img.dataset.src);const breadcrumbs=p.first('ul.breadcrumbs');d.body.innerHTML=`<nav>${breadcrumbs.outerHTML}</nav><ul class="thumbnail-items">${thumbs.map((url,idx)=>`<li class="thumbnail-item"><a href="#large${idx}"><img src="${url}"/></a></li>`).join('')}</ul>${larges.map((url,idx)=>`<div class="large-container"id="large${idx}"><a href="${idx == larges.length - 1? '#large0': `#large${idx+1}`}"><img src="${url}"/></a></div>`).join('\n')}<div class="${identifier}"/><style>.large-container{width:100%;height:100vh;text-align:center}.large-container img{width:auto;height:auto;max-width:95%;max-height:95%}</style>`};pixiv.waitOverrideView();

" vim: set ft=vim:
