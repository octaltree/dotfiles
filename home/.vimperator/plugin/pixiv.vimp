autocmd LocationChange www.pixiv.net -js (function(){ var w = content.window; var l = w.location.href; if( /^https:\/\/www.pixiv.net\/member.php/.test(l) ) w.location.href = l.replace(/member/g, 'member_illust'); }());
autocmd DOMLoad www.pixiv.net -js (function(){ var d = content.document; const andthen = (xs, f) => xs.length < 1? xs: f(xs[0]); andthen(andthen(d.getElementsByClassName('stacc'), li => li.getElementsByTagName('a')), a => { a.innerHTML = "hidden"; a.href = "https://www.pixiv.net/bookmark.php?type=user&rest=hide";  }); }());
autocmd DOMLoad https://www.pixiv.net/member_illust.php -js (function(){ var w = content.window; var d = content.document; var tmp = d.querySelector('.works_display .multiple'); if( tmp ) w.location.href = w.location.href.replace(/medium/g, 'manga'); }());
command! -nargs=0 -description="tabopen all images at pixiv" openPixiv js Array.prototype.map.call(content.document.querySelectorAll('li.image-item'), li => { var as = li.querySelectorAll('a'); return as[as.length-1].href; }).forEach(url => window.openNewTabWith(url));
